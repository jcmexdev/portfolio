---
permalink: "blog/saga-orchestrator.html"
base_url: "../"
---
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mastering Distributed Consistency: Saga Orchestrator in Go | Case Study</title>
    <meta name="description"
        content="A technical deep dive into building a Saga Orchestrator with Go, gRPC, and Redis to maintain data consistency in microservices. Learn about compensating transactions and distributed system design.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://jcmexdev.github.io/portfolio/blog/saga-orchestrator.html">
    <meta property="og:title" content="Mastering Distributed Consistency: Saga Orchestrator in Go">
    <meta property="og:description"
        content="Deep dive into Saga Pattern orchestration for microservices using Go, gRPC, and Redis.">
    <meta property="og:image" content="https://jcmexdev.github.io/portfolio/assets/images/blog/saga-hero.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://jcmexdev.github.io/portfolio/blog/saga-orchestrator.html">
    <meta property="twitter:title" content="Mastering Distributed Consistency: Saga Orchestrator in Go">
    <meta property="twitter:description"
        content="Deep dive into Saga Pattern orchestration for microservices using Go, gRPC, and Redis.">
    <meta property="twitter:image" content="https://jcmexdev.github.io/portfolio/assets/images/blog/saga-hero.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../code-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://t.contentsquare.net/uxa/b4c4b2b1bf890.js"></script>
    <style>
        .blog-post-content {
            padding-top: 120px;
            max-width: 850px;
            margin: 0 auto;
        }

        .blog-header {
            margin-bottom: 4rem;
            text-align: left;
        }

        .blog-title {
            font-size: 3.5rem;
            line-height: 1.1;
            font-weight: 800;
            margin-bottom: 1.5rem;
            letter-spacing: -1px;
            background: linear-gradient(90deg, var(--accent-color), var(--accent-secondary));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .blog-meta {
            color: var(--text-secondary);
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .blog-body section {
            margin-bottom: 3rem;
        }

        .blog-body h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
            position: relative;
            display: inline-block;
        }

        .blog-body h2::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 40px;
            height: 3px;
            background: var(--accent-color);
            border-radius: 2px;
        }

        .blog-body h3 {
            font-size: 1.4rem;
            margin: 2rem 0 1rem;
            color: var(--accent-color);
        }

        .blog-body p {
            font-size: 1.15rem;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            line-height: 1.7;
        }

        .blog-body strong {
            color: var(--text-primary);
        }

        .blog-body ul,
        .blog-body ol {
            margin-bottom: 1.5rem;
            padding-left: 1.5rem;
            color: var(--text-secondary);
        }

        .blog-body li {
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
        }

        .blog-hero-image {
            margin: 3rem 0;
            border-radius: 20px;
            overflow: hidden;
            border: 1px solid var(--glass-border);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .hero-img {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.5s ease;
        }

        .blog-hero-image:hover .hero-img {
            transform: scale(1.02);
        }


        .mermaid-container {
            position: relative;
            background: #0d1117;
            /* GitHub dark background */
            border: 1px solid #30363d;
            /* GitHub border color */
            border-radius: 16px;
            margin: 3rem 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            height: 600px;
        }

        .mermaid {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .mermaid svg {
            width: 100% !important;
            height: 100% !important;
            max-width: none !important;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--accent-color);
            margin-bottom: 2rem;
            font-weight: 600;
            transition: transform 0.3s ease;
        }

        .back-link:hover {
            transform: translateX(-5px);
        }

        .blog-tags {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .blog-tag {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: 0.3rem 0.8rem;
            border-radius: 100px;
            background: rgba(0, 173, 216, 0.15);
            color: var(--accent-color);
            font-weight: 700;
        }

        /* Light Mode Adjustments */
        body.light-mode .blog-body p,
        body.light-mode .blog-body li {
            color: #4b5563;
        }


        body.light-mode .mermaid-container {
            background: #ffffff;
            border-color: #d0d7de;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js"></script>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        const mermaidSavedTheme = localStorage.getItem('theme');
        const mermaidPrefersLight = window.matchMedia('(prefers-color-scheme: light)').matches;
        const mermaidIsLight = mermaidSavedTheme ? mermaidSavedTheme === 'light' : mermaidPrefersLight;

        mermaid.initialize({
            startOnLoad: false,
            theme: mermaidIsLight ? 'default' : 'dark',
            securityLevel: 'loose',
            fontFamily: 'Inter',
            themeVariables: mermaidIsLight ? {} : {
                // Approximate GitHub Dark variables
                background: '#0d1117',
                primaryColor: '#1f6feb',
                primaryTextColor: '#c9d1d9',
                primaryBorderColor: '#30363d',
                lineColor: '#8b949e',
                secondaryColor: '#238636',
                tertiaryColor: '#283036'
            }
        });

        mermaid.run({
            querySelector: '.mermaid'
        }).then(() => {
            const svgs = document.querySelectorAll('.mermaid svg');
            svgs.forEach(svg => {
                svgPanZoom(svg, {
                    zoomEnabled: true,
                    controlIconsEnabled: true,
                    fit: true,
                    center: true,
                    minZoom: 0.5,
                    maxZoom: 10
                });
                svg.style.cursor = 'grab';
                svg.addEventListener('mousedown', () => svg.style.cursor = 'grabbing');
                svg.addEventListener('mouseup', () => svg.style.cursor = 'grab');
            });
        }).catch(err => console.error(err));

        // Initialize Highlight.js
        hljs.highlightAll();
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "headline": "Mastering Distributed Consistency: Building a Saga Orchestrator in Go",
      "image": "https://jcmexdev.github.io/portfolio/assets/images/blog/saga-hero.png",
      "author": {
        "@type": "Person",
        "name": "Juan Carlos Garcia",
        "url": "https://jcmexdev.github.io/portfolio/"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Juan Carlos Garcia Portfolio",
        "logo": {
          "@type": "ImageObject",
          "url": "https://jcmexdev.github.io/portfolio/assets/images/avatar.png"
        }
      },
      "datePublished": "2026-02-24",
      "description": "Technical deep dive into the Saga Pattern for microservices using Go, gRPC, and Redis."
    }
    </script>
</head>

<body data-page="saga">
    {% include "partials/header.njk" %}

    <main class="container">
        <article class="blog-post-content">
            <a href="../index.html#projects" class="back-link" data-i18n="blog_back">
                <i class="fas fa-arrow-left"></i> Volver al Portafolio
            </a>

            <header class="blog-header">
                <div class="blog-tags">
                    <span class="blog-tag" data-i18n="blog_tag_dist">Distributed Systems</span>
                    <span class="blog-tag" data-i18n="blog_tag_go">Go</span>
                    <span class="blog-tag" data-i18n="blog_tag_case">Case Study</span>
                </div>
                <h1 class="blog-title" data-i18n="blog_saga_title">Mastering Distributed Consistency: Building a Saga
                    Orchestrator in Go</h1>
                <div class="blog-meta">
                    <span data-i18n="blog_saga_date"><i class="far fa-calendar-alt"></i> February 2026</span>
                    <span data-i18n="blog_saga_read"><i class="far fa-clock"></i> 8 min read</span>
                </div>

                <div class="blog-hero-image">
                    <img src="../assets/images/blog/saga-hero.png" alt="Saga Orchestration Architecture Hero"
                        class="hero-img">
                </div>
            </header>

            <div class="blog-body">
                <section>
                    <h2 data-i18n="blog_saga_prob_title">The Problem: When ACID Isn't Enough</h2>
                    <p data-i18n="blog_saga_prob_p1">In the world of monolithic applications, maintaining data
                        consistency is straightforward: we rely on ACID transactions. However, when moving to
                        <strong>Microservices</strong>, the "T" in ACID (Transactions) becomes a distributed nightmare.
                    </p>

                    <p data-i18n="blog_saga_prob_p2">Imagine an e-commerce flow:</p>
                    <ol>
                        <li data-i18n="blog_saga_prob_li1"><strong>Order Service</strong> creates an order.</li>
                        <li data-i18n="blog_saga_prob_li2"><strong>Inventory Service</strong> reserves stock.</li>
                        <li data-i18n="blog_saga_prob_li3"><strong>Payment Service</strong> charges the customer.</li>
                    </ol>

                    <p data-i18n="blog_saga_prob_p3">If payment fails, but stock has already been reserved, we face a
                        "Zombie Reservation". Traditional <strong>Two-Phase Commit (2PC)</strong> is too slow and
                        creates tight coupling, making it unsuitable for large-scale cloud environments.</p>
                </section>

                <section>
                    <h2 data-i18n="blog_saga_sol_title">The Solution: The Saga Pattern</h2>
                    <p data-i18n="blog_saga_sol_p1">To solve this, I implemented the <strong>Saga Pattern</strong>. A
                        Saga is a sequence of local transactions. Each step has a corresponding <strong>Compensating
                            Transaction</strong> to undo changes if a subsequent step fails.</p>

                    <h3 data-i18n="blog_saga_sol_h3">Why Orchestration over Choreography?</h3>
                    <p data-i18n="blog_saga_sol_p2">While Choreography (event-based) is highly decoupled, it can lead to
                        "Spaghetti Flows" where tracking transaction state becomes almost impossible. I chose
                        <strong>Orchestration</strong>:
                    </p>
                    <ul>
                        <li data-i18n="blog_saga_sol_li1"><strong>Centralized Logic</strong>: Easier to maintain and
                            reason about complex business flows.</li>
                        <li data-i18n="blog_saga_sol_li2"><strong>State Visibility</strong>: The Orchestrator knows
                            exactly where the transaction is at any moment.</li>
                        <li data-i18n="blog_saga_sol_li3"><strong>Simplified Debugging</strong>: Error handling is
                            consolidated in one place.</li>
                    </ul>
                </section>

                <section>
                    <h2 data-i18n="blog_saga_tech_title">Tech Stack Decisions</h2>

                    <h3 data-i18n="blog_saga_tech_grpc_h3">gRPC: Contract-First Performance</h3>
                    <p data-i18n="blog_saga_tech_grpc_p1">Internal communication is based on <strong>gRPC</strong> and
                        <strong>Protocol Buffers</strong>. Compared to REST/JSON, gRPC offers binary serialization and
                        strong typing.
                    </p>

                    <pre><code class="language-protobuf">// order.proto snippet
service Order {
  // Initiates a new purchase flow and starts the orchestration saga.
  rpc CreateOrder(CreateOrderRequest) returns (CreateOrderResponse);
  
  // Updates internal status during the Saga lifecycle.
  rpc UpdateOrderStatus(UpdateOrderStatusRequest) returns (UpdateOrderStatusResponse);
}</code></pre>

                    <h3 data-i18n="blog_saga_tech_redis_h3">Redis: The Idempotency Shield</h3>
                    <p data-i18n="blog_saga_tech_redis_p1">To achieve "exactly-once" semantics, each step is protected
                        by an <strong>Idempotency Layer</strong>. Redis acts as a distributed lock, preventing a retry
                        from processing the same payment twice.</p>
                </section>

                <section>
                    <h2 data-i18n="blog_saga_challenge_title">Challenges & Lessons: The Art of Rollback</h2>
                    <p data-i18n="blog_saga_challenge_p1">The biggest challenge was handling <strong>Compensating
                            Transactions</strong>. If a step fails, the Orchestrator must trigger rollbacks in
                        <strong>LIFO (Last-In, First-Out)</strong> order.
                    </p>

                    <pre><code class="language-go">func (o *Orchestrator) rollback(ctx context.Context, steps []Step) {
    for i := len(steps) - 1; i >= 0; i-- {
        step := steps[i]
        if err := step.Compensate(ctx); err != nil {
            slog.ErrorContext(ctx, "CRITICAL: compensation failed", "step", step.Name())
        }
    }
}</code></pre>
                </section>

                <section>
                    <h2 data-i18n="blog_saga_flow_title">Transaction Flow</h2>
                    <div class="mermaid-container">
                        <div class="mermaid">
                            sequenceDiagram
                            participant C as Client
                            participant O as Order Orchestrator
                            participant I as Inventory
                            participant P as Payment

                            Note over C,P: Happy Path
                            C->>O: POST /orders
                            O->>O: Create Order (Pending)
                            O-->>C: 201 Created
                            Note over O,P: Asynchronous Saga Execution
                            O->>I: Reserve Stock (gRPC)
                            I-->>O: Success
                            O->>P: Charge Payment (gRPC)
                            P-->>O: Success
                            O->>O: Update Order (Confirmed)

                            Note over C,P: Compensation Path (Failure at Payment)
                            C->>O: POST /orders
                            O->>O: Create Order (Pending)
                            O-->>C: 201 Created
                            Note over O,P: Asynchronous Saga Execution
                            O->>I: Reserve Stock (gRPC)
                            I-->>O: Success
                            O->>P: Charge Payment (gRPC)
                            P-->>O: Payment Failed!

                            Note left of O: Rollback Started
                            O->>I: Release Stock (Compensate)
                            I-->>O: Confirmed
                            O->>O: Update Order (Cancelled)
                        </div>
                    </div>
                </section>

                <section>
                    <h2 data-i18n="blog_saga_final_title">Final Thoughts</h2>
                    <p data-i18n="blog_saga_final_p1">Building this Saga Orchestrator reinforced a key backend
                        engineering principle: <strong>Consistency is not a given; it's a design decision.</strong></p>
                </section>
            </div>
        </article>
    </main>

    {% include "partials/footer.njk" %}

    <!-- Custom Cursor -->
    <div class="cursor-dot" id="cursorDot"></div>
    <div class="cursor-outline" id="cursorOutline"></div>

    <!-- Terminal Trigger Button -->
    <div class="terminal-trigger" id="terminalTrigger" title="Open Terminal">
        <i class="fas fa-terminal"></i>
        <span class="tt">&gt;_ open terminal</span>
    </div>

    <!-- Terminal Overlay & Window -->
    <div class="terminal-overlay" id="terminalOverlay">
        <div class="terminal-window">
            <div class="terminal-header">
                <div class="terminal-buttons">
                    <span class="close-btn" id="terminalClose"></span>
                    <span class="minimize-btn"></span>
                    <span class="maximize-btn"></span>
                </div>
                <span class="terminal-title">jcmexdev â€” portfolio â€” bash</span>
            </div>
            <div class="terminal-body" id="terminalBody">
                <div class="output system">Welcome to jcmexdev's portfolio terminal v2.0</div>
                <div class="output system">Type <span class="cmd">help</span> to see available commands.</div>
                <br>
                <div class="input-line">
                    <span class="prompt">jcmexdev@portfolio:~$</span>
                    <input type="text" id="terminalInput" autofocus autocomplete="off" spellcheck="false"
                        placeholder="type a command...">
                </div>
            </div>
        </div>
    </div>

    <script src="../locales/common.js"></script>
    <script src="../locales/saga.js"></script>
    <script src="../script.js"></script>
    <script>
        // â”€â”€ Theme Toggle Logic â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const themeToggle = document.getElementById('themeToggle');
        const toggleIcon = themeToggle.querySelector('.toggle-icon');

        function applyTheme(isLight) {
            document.body.classList.toggle('light-mode', isLight);
            toggleIcon.textContent = isLight ? 'â˜€ï¸' : 'ðŸŒ™';
        }

        const savedTheme = localStorage.getItem('theme');
        const prefersLight = window.matchMedia('(prefers-color-scheme: light)').matches;
        applyTheme(savedTheme ? savedTheme === 'light' : prefersLight);

        themeToggle.addEventListener('click', () => {
            const isLight = !document.body.classList.contains('light-mode');
            applyTheme(isLight);
            localStorage.setItem('theme', isLight ? 'light' : 'dark');
        });

        // â”€â”€ Custom Cursor Logic â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const dot = document.getElementById('cursorDot');
        const outline = document.getElementById('cursorOutline');
        if (window.matchMedia('(pointer: fine)').matches) {
            document.body.style.cursor = 'none';
            let outlineX = 0, outlineY = 0;
            window.addEventListener('mousemove', e => {
                dot.style.left = e.clientX + 'px';
                dot.style.top = e.clientY + 'px';
                outlineX += (e.clientX - outlineX) * 0.15;
                outlineY += (e.clientY - outlineY) * 0.15;
                outline.style.left = outlineX + 'px';
                outline.style.top = outlineY + 'px';
            });
            document.querySelectorAll('a, button, .terminal-trigger').forEach(el => {
                el.addEventListener('mouseenter', () => outline.classList.add('hover'));
                el.addEventListener('mouseleave', () => outline.classList.remove('hover'));
            });
        }

        // â”€â”€ Terminal Trigger â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const trigger = document.getElementById('terminalTrigger');
        const overlay = document.getElementById('terminalOverlay');
        const closeBtn = document.getElementById('terminalClose');
        const input = document.getElementById('terminalInput');

        trigger.addEventListener('click', () => {
            overlay.classList.add('active');
            setTimeout(() => input.focus(), 300);
        });

        closeBtn.addEventListener('click', () => {
            overlay.classList.remove('active');
        });
    </script>
</body>

</html>